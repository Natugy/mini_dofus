/*! For license information please see main.bundle.js.LICENSE.txt */
!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:String(r)}var n=function(){function t(e,r,n,o,i,u,a,c,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nom=e,this.pv=r,this.pvMax=r,this.attaque=n,this.defense=o,this.x=i,this.y=u,this.porteeAttaque=a,this.pm=c,this.pmMax=c,this.pa=s,this.paMax=s,this.effetActifs=[]}var r,n;return r=t,(n=[{key:"attaquer",value:function(t){var e=Math.max(this.attaque-t.defense,0);t.pv=Math.max(t.pv-e,0),It.logMessageCombat("".concat(this.nom," attaque ").concat(t.nom," et inflige ").concat(e," points de dÃ©gÃ¢ts."))}},{key:"estVivant",value:function(){return this.pv>0}},{key:"estAPorteeAttaque",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)<=this.porteeAttaque}},{key:"deplacer",value:function(t,e){var r=Math.abs(t-this.x)+Math.abs(e-this.y);this.pm>=r?(this.x=t,this.y=e,this.pm-=r,It.logMessageCombat("".concat(this.nom," se dÃ©place en (").concat(t,", ").concat(e,"). PM restants: ").concat(this.pm))):It.logMessageErreur("Pas assez de PM pour se dÃ©placer.")}},{key:"debutTour",value:function(){var t=this;this.effetActifs.forEach((function(e){e.appliqueEffet(t)})),this.effetActifs=this.effetActifs.filter((function(t){return t.estActif()}))}},{key:"recoitEffet",value:function(t){null==t||this.possedeEffet(t)||(this.effetActifs.push(t),It.logMessageInfo("".concat(this.nom," a reÃ§u l'effet ").concat(t.nom)))}},{key:"possedeEffet",value:function(t){return this.effetActifs.filter((function(e){return e.nom===t.nom})).length>0}},{key:"finDuTour",value:function(){this.pa=this.paMax,this.pm=this.pmMax,It.logMessageInfo("Fin du tour de ".concat(this.nom,". PA restaurÃ©s Ã  ").concat(this.pa,"."))}},{key:"resetStats",value:function(){this.pv=this.pvMax,this.pa=this.paMax,this.pm=this.pmMax}}])&&e(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function u(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:String(e)}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sort=e,this.htmlElement=document.createElement("button"),this.htmlElement.className="action-button",this.htmlElement.innerHTML=e.icon,this.htmlElement.setAttribute("data-name","".concat(e.nom," (").concat(e.coutPA," PA)"))}var e,r;return e=t,(r=[{key:"addEventListener",value:function(t,e){this.htmlElement.addEventListener(t,e)}},{key:"resetBouton",value:function(){var t="".concat(this.sort.nom," (").concat(this.sort.coutPA," PA) ");null!==this.sort.effet&&(t+="Effet : ".concat(this.sort.effet.nom)),this.htmlElement=document.createElement("button"),this.htmlElement.className="action-button",this.htmlElement.innerHTML=this.sort.icon,this.htmlElement.setAttribute("data-name",t)}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function f(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:String(e)}function l(t,e,r){return e=p(e),function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,y()?Reflect.construct(e,r||[],p(t).constructor):e.apply(t,r))}function y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(y=function(){return!!t})()}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}var m=function(t){function e(t,r,n,o,i,u,a){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(c=l(this,e,[t,r,n,o,i,u,a,3])).experience=0,c.niveau=1,c.paMax=6,c.pa=c.paMax,c.sorts=[],c}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),r=e,(n=[{key:"ratioExperience",value:function(){return this.experience/(100*this.niveau)}},{key:"gagnerExperience",value:function(t){for(this.experience+=t,It.logMessageInfo("".concat(this.nom," gagne ").concat(t," points d'expÃ©rience."));this.experience>=100*this.niveau;)this.monterDeNiveau()}},{key:"estAPorteeDeplacement",value:function(t){var e=Math.abs(this.x-t.x)+Math.abs(this.y-t.y);return e<=this.pm&&e>0}},{key:"ajoutSort",value:function(t){t.lanceur=this,this.sorts.push(t),At.listeSortsDebloquer.push(new a(t))}},{key:"monterDeNiveau",value:function(){this.niveau++,this.pvMax+=10,this.pv=this.pvMax,this.attaque+=4,this.defense+=1,this.experience=Math.max(this.experience-100*this.niveau,0),this.niveau%3==0&&this.paMax++,this.niveau%5==0&&this.pmMax++,this.niveau%7==0&&this.porteeAttaque++,this.niveau<=At.listeSorts.length&&this.ajoutSort(At.listeSorts[this.niveau-1]),It.logMessageInfo("".concat(this.nom," passe au niveau ").concat(this.niveau,"!"))}},{key:"finDuTour",value:function(){this.pa=this.paMax,this.pm=this.pmMax,It.logMessageInfo("Fin du tour de ".concat(this.nom,". PA restaurÃ©s Ã  ").concat(this.pa,"."))}}])&&s(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(n);function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w(n.key),n)}}function d(t,e,r){return e&&b(t.prototype,e),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t,e,r){return(e=w(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(e)?e:String(e)}var S=d((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}));function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P(n.key),n)}}function P(t){var e=function(t,e){if("object"!=E(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==E(e)?e:String(e)}g(S,"CROIX","CROIX"),g(S,"DIAGONALE","DIAGONALE"),g(S,"ZONE","ZONE");var x=function(){function t(e,r,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:S.ZONE,a=arguments.length>6?arguments[6]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nom=e,this.coutPA=r,this.portee=n,this.degats=o,this.lanceur=a,this.icon="ðŸ”®",this.typeCiblage=u,this.effet=i}var e,r;return e=t,(r=[{key:"estAPortee",value:function(t){var e=Math.abs(this.lanceur.x-t.x)+Math.abs(this.lanceur.y-t.y);return this.typeCiblage===S.DIAGONALE?e<=2*(this.portee+this.lanceur.porteeAttaque):e<=this.portee+this.lanceur.porteeAttaque}},{key:"lancerSort",value:function(t){if(this.coutPA<=this.lanceur.pa&&this.estAPortee(t)){this.lanceur.pa-=this.coutPA;var e=Math.max(this.degats+this.lanceur.attaque-t.defense,0);t.pv=Math.max(t.pv-e,0),null!==this.effet&&t.recoitEffet(this.effet),It.logMessageCombat("".concat(this.lanceur.nom," lance ").concat(this.nom," sur ").concat(t.nom," et inflige ").concat(e," points de dÃ©gÃ¢ts."))}else It.logMessageErreur("Impossible de lancer ".concat(this.nom,". Pas assez de PA ou cible hors de portÃ©e."))}},{key:"peutLancerSort",value:function(){return this.coutPA<=this.lanceur.pa}}])&&j(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,M(n.key),n)}}function M(t){var e=function(t,e){if("object"!=O(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(e)?e:String(e)}var A=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=r,this.contenu=null,this.htmlElement=document.createElement("div"),this.htmlElement.className="cell",this.htmlElement.dataset.x=e,this.htmlElement.dataset.y=r}var e,r;return e=t,(r=[{key:"resetCell",value:function(){this.htmlElement=document.createElement("div"),this.htmlElement.className="cell",this.htmlElement.dataset.x=this.x,this.htmlElement.dataset.y=this.y}},{key:"resetEvents",value:function(){this.htmlElement.removeEventListener("click",(function(){}))}},{key:"addEventListener",value:function(t,e){this.htmlElement.addEventListener(t,e)}},{key:"afficherPorteeMouvement",value:function(){this.htmlElement.classList.add("in-move-range")}},{key:"afficherPorteeSort",value:function(){this.htmlElement.classList.add("in-range")}},{key:"estJoueur",value:function(t){this.htmlElement.classList.add("player"),this.htmlElement.textContent="J",this.contenu=t}},{key:"estMonstre",value:function(t){this.htmlElement.classList.add("monster"),this.htmlElement.textContent="M",this.contenu=t}},{key:"estLibre",value:function(){return null===this.contenu}}])&&k(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function T(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L(n.key),n)}}function L(t){var e=function(t,e){if("object"!=C(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==C(e)?e:String(e)}var I=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,r=[{key:"afficherCarte",value:function(){var t=document.getElementById("map-container");t.innerHTML="";for(var e=At.map,r=(At.joueur,e.length),n=0;n<r;n++)for(var o=0;o<r;o++){var i=e[n][o];t.appendChild(i.htmlElement)}}},{key:"resetCarteMonstre",value:function(){for(var t=At.map,e=At.joueur,r=t.length,n=At.monstresEnjeu,o=t[e.y][e.x],i=0;i<r;i++){t[i]=[];for(var u=0;u<r;u++)i===e.y&&u===e.x?t[i][u]=o:t[i][u]=new A(u,i)}t[e.y][e.x].estJoueur(e),n.forEach((function(e){t[e.y][e.x].estMonstre(e)}))}}],null&&T(e.prototype,null),r&&T(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J(n.key),n)}}function J(t){var e=function(t,e){if("object"!=_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_(e)?e:String(e)}var D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,r=[{key:"afficherStats",value:function(){var t=At.joueur;document.getElementById("player-hp").textContent="".concat(t.pv,"/").concat(t.pvMax),document.getElementById("player-pa").textContent="".concat(t.pa,"/").concat(t.paMax),document.getElementById("player-pm").textContent="".concat(t.pm,"/").concat(t.pmMax),document.getElementById("player-atk").textContent=t.attaque}}],null&&N(e.prototype,null),r&&N(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function B(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R(n.key),n)}}function R(t){var e=function(t,e){if("object"!=q(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==q(e)?e:String(e)}function z(t,e,r){return e=Z(e),function(t,e){if(e&&("object"===q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return V(t)}(t,G()?Reflect.construct(e,r||[],Z(t).constructor):e.apply(t,r))}function G(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(G=function(){return!!t})()}function Z(t){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Z(t)}function V(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}var H=function(t){function e(t,r,n,o,i,u,a,c){var s,f=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=z(this,e,[t,r,n,o,i,u,a,3,3])).experienceDonnee=c,s.sort=new x("Coup de griffe",2,1,10,null,S.ZONE,V(s)),s.boss=f,s}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(e,t),r=e,(n=[{key:"jouerTour",value:function(){var t=At.joueur;return this.sort.lanceur=this,this.pa>0&&(this.pm>0&&!this.estAPorteeAttaque(t)?(this.deplacerVersJoueur(),!0):!(!this.estAPorteeAttaque(t)||!this.sort.peutLancerSort()||(this.sort.lancerSort(t),0)))}},{key:"deplacerVersJoueur",value:function(){var t=At.joueur,e=At.map,r=Math.sign(t.x-this.x),n=Math.sign(t.y-this.y);Math.abs(t.x-this.x)>Math.abs(t.y-this.y)?this.checkCoordonnees(this.x+r,this.y)&&e[this.y][this.x+r].estLibre()?this.deplacer(this.x+r,this.y):this.checkCoordonnees(this.x,this.y+n)&&e[this.y+n][this.x].estLibre()&&this.deplacer(this.x,this.y+n):this.checkCoordonnees(this.x,this.y+n)&&e[this.y+n][this.x].estLibre()?this.deplacer(this.x,this.y+n):this.checkCoordonnees(this.x+r,this.y)&&e[this.y][this.x+r].estLibre()?this.deplacer(this.x+r,this.y):this.pm--}},{key:"checkCoordonnees",value:function(t,e){return t>=0&&t<At.mapSize&&e>=0&&e<At.mapSize}},{key:"wait",value:function(t){return new Promise((function(e){return setTimeout(e,t)}))}}])&&B(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(n);function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,K(n.key),n)}}function K(t){var e=function(t,e){if("object"!=X(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==X(e)?e:String(e)}function Q(t,e,r){return e=W(e),function(t,e){if(e&&("object"===X(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,U()?Reflect.construct(e,r||[],W(t).constructor):e.apply(t,r))}function U(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(U=function(){return!!t})()}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W(t)}function $(t,e){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$(t,e)}var tt=function(t){function e(t,r,n,o,i){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=Q(this,e,[t,r,n,0,i])).soin=o,u}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(e,t),r=e,(n=[{key:"lancerSort",value:function(t){this.coutPA<=this.lanceur.pa&&this.estAPortee(t)?(this.lanceur.pa-=this.coutPA,t.pv=Math.min(t.pv+this.soin,t.pvMax),It.logMessageCombat("".concat(this.lanceur.nom," lance ").concat(this.nom," sur ").concat(t.nom," et lui rend ").concat(this.soin," points de vie."))):It.logMessageErreur("Impossible de lancer ".concat(this.nom,". Pas assez de PA ou cible hors de portÃ©e."))}}])&&Y(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(x);function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nt(n.key),n)}}function nt(t){var e=function(t,e){if("object"!=et(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==et(e)?e:String(e)}function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function it(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ut(n.key),n)}}function ut(t){var e=function(t,e){if("object"!=ot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ot(e)?e:String(e)}function at(t,e,r){return e=st(e),function(t,e){if(e&&("object"===ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ct()?Reflect.construct(e,r||[],st(t).constructor):e.apply(t,r))}function ct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ct=function(){return!!t})()}function st(t){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},st(t)}function ft(t,e){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ft(t,e)}var lt=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=at(this,e,[t,r])).nom=gt.POISON,n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ft(t,e)}(e,t),r=e,(n=[{key:"appliqueEffet",value:function(t){t.pv-=this.puissance,this.duree--,It.logMessageCombat("".concat(t.nom," a perdu ").concat(this.puissance," Ã  cause du poison. Temps Restant : ").concat(this.duree))}},{key:"copy",value:function(){return new e(this.puissance,this.duree)}}])&&it(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.puissance=e,this.duree=r,this.nom="Effet"}var e,r;return e=t,(r=[{key:"appliqueEffet",value:function(t){}},{key:"estActif",value:function(){return this.duree>0}}])&&rt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mt(n.key),n)}}function ht(t,e,r){return e&&pt(t.prototype,e),r&&pt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function mt(t){var e=function(t,e){if("object"!=yt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yt(e)?e:String(e)}var vt,bt,dt,gt=ht((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}));function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function St(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Et(n.key),n)}}function Et(t){var e=function(t,e){if("object"!=wt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wt(e)?e:String(e)}vt=gt,dt="POISON",(bt=mt(bt="POISON"))in vt?Object.defineProperty(vt,bt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):vt[bt]=dt;var jt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,r=[{key:"getEffet",value:function(t){if(t===gt.POISON)return new lt(12,3)}}],null&&St(e.prototype,null),r&&St(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}function xt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mt(n.key),n)}}function Ot(t,e,r){return e&&xt(t.prototype,e),r&&xt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kt(t,e,r){return(e=Mt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mt(t){var e=function(t,e){if("object"!=Pt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pt(e)?e:String(e)}var At=Ot((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}));function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lt(n.key),n)}}function Lt(t){var e=function(t,e){if("object"!=Ct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ct(e)?e:String(e)}kt(At,"tour",1),kt(At,"map",[]),kt(At,"joueur",new m("Joueur",100,10,1,1,1,1)),kt(At,"listeMonstres",[new H("Piou",20,5,2,2,2,1,30),new H("Chacha",30,7,3,9,9,1,50),new H("Bouftou",50,10,2,9,9,1,75),new H("Chafer",75,15,3,9,0,2,90),new H("Craqueleur",100,20,5,9,0,2,100),new H("Bouftou Royal",150,25,7,9,0,1,150,!0),new H("Chuchu",200,30,10,0,0,3,200,!0),new H("Dark Vlad",250,35,15,0,0,3,250,!0),new H("Oropo",500,50,20,0,0,3,500,!0)]),kt(At,"listeSorts",[new x("Coup d'Ã©pÃ©e",2,0,10,null,S.CROIX),new x("Eclair",2,0,15,null,S.DIAGONALE),new tt("Soin",3,0,10,null,S.CROIX),new x("Fleche de poison",4,2,25,jt.getEffet(gt.POISON),S.CROIX),new x("MÃ©tÃ©ore",5,3,40,null,S.DIAGONALE),new x("Tornade",8,5,60,null,S.ZONE),new tt("Purification",6,2,20,null,S.ZONE),new x("TempÃªte de feu",8,6,50,null,S.ZONE),new x("Annihilastion",10,15,100,null,S.ZONE),new x("Pluie de mÃ©tÃ©ores",8,7,80,null,S.ZONE)]),kt(At,"mapSize",10),kt(At,"monstresEnjeu",[]),kt(At,"listeSortsDebloquer",[]);var It=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,r=[{key:"logMessage",value:function(t,e){var r=At.tour,n=document.getElementById("game-log");n.innerHTML+='<p class="'.concat(e,'">Tour ').concat(r,": ").concat(t,"</p>"),n.scrollTop=n.scrollHeight}},{key:"logMessageCombat",value:function(e){t.logMessage(e,"green")}},{key:"logMessageErreur",value:function(e){t.logMessage(e,"red")}},{key:"logMessageInfo",value:function(e){t.logMessage(e,"blue")}}],null&&Tt(e.prototype,null),r&&Tt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function Nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jt(n.key),n)}}function Jt(t){var e=function(t,e){if("object"!=_t(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_t(e)?e:String(e)}var Dt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,r=[{key:"afficherXpBar",value:function(){var t=At.joueur,e=Math.round(t.experience/(100*t.niveau)*100),r=document.querySelector(".xp-progress"),n=document.querySelector(".xp-text");r.style.width="".concat(e,"%"),n.textContent="".concat(e,"% - Niveau ").concat(t.niveau)}}],null&&Nt(e.prototype,null),r&&Nt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qt(t){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qt(t)}function Bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rt(n.key),n)}}function Rt(t){var e=function(t,e){if("object"!=qt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qt(e)?e:String(e)}var zt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,r=[{key:"afficherSorts",value:function(){var t=At.listeSortsDebloquer,e=document.getElementById("actionRow1"),r=document.getElementById("actionRow2");e.innerHTML="",r.innerHTML="",t.forEach((function(t,n){t.resetBouton(),n<6?e.appendChild(t.htmlElement):r.appendChild(t.htmlElement)}))}}],null&&Bt(e.prototype,null),r&&Bt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Gt(t){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(t)}function Zt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vt(n.key),n)}}function Vt(t){var e=function(t,e){if("object"!=Gt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Gt(e)?e:String(e)}var Ft=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,r=[{key:"afficherGameOver",value:function(){var t=document.getElementById("game-over-screen");t.style.display="flex",t.innerHTML="";var e=document.createElement("h2");e.textContent="Game Over!",t.appendChild(e);var r=document.createElement("button");r.textContent="Nouvelle partie",r.onclick=function(){return location.reload()},t.appendChild(r),document.getElementById("game-container").style.display="none"}}],null&&Zt(e.prototype,null),r&&Zt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function Xt(){Xt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof b?e:b,u=Object.create(i.prototype),a=new C(n||[]);return o(u,"_invoke",{value:O(t,r,a)}),u}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var y="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function b(){}function d(){}function g(){}var w={};s(w,u,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(T([])));E&&E!==r&&n.call(E,u)&&(w=E);var j=g.prototype=b.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function r(o,i,u,a){var c=l(t[o],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==Ht(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,u,a)}),(function(t){r("throw",t,u,a)})):e.resolve(f).then((function(t){s.value=t,u(s)}),(function(t){return r("throw",t,u,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=y;return function(i,u){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw u;return{value:t,done:!0}}for(n.method=i,n.arg=u;;){var a=n.delegate;if(a){var c=k(a,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=l(e,r,n);if("normal"===s.type){if(o=n.done?m:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=l(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var u=i.arg;return u?u.done?(r[e.resultName]=u.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):u:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ht(e)+" is not iterable")}return d.prototype=g,o(j,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:d,configurable:!0}),d.displayName=s(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,c,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},P(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var u=new x(f(t,r,n,o),i);return e.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},P(j),s(j,c,"Generator"),s(j,u,(function(){return this})),s(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var u=this.tryEntries[i],a=u.completion;if("root"===u.tryLoc)return o("end");if(u.tryLoc<=this.prev){var c=n.call(u,"catchLoc"),s=n.call(u,"finallyLoc");if(c&&s){if(this.prev<u.catchLoc)return o(u.catchLoc,!0);if(this.prev<u.finallyLoc)return o(u.finallyLoc)}else if(c){if(this.prev<u.catchLoc)return o(u.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return o(u.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Yt(t,e,r,n,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}function Kt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function u(t){Yt(i,n,o,u,a,"next",t)}function a(t){Yt(i,n,o,u,a,"throw",t)}u(void 0)}))}}function Qt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ut(n.key),n)}}function Ut(t){var e=function(t,e){if("object"!=Ht(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ht(e)?e:String(e)}var Wt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.joueur=At.joueur,this.monstresEnJeu=At.monstresEnjeu,this.tour=At.tour,this.map=At.map,this.mouvJoueurActif=!1,this.mapSize=10,this.viseeSortActif=!1,this.desactiverInterface=!1}var e,r,n;return e=t,r=[{key:"initialiserGame",value:function(){this.joueur.ajoutSort(At.listeSorts[0]),this.monstresEnJeu.push(Object.assign(new H,At.listeMonstres[0])),this.resetCarte(),It.logMessageInfo("Bienvenue dans le jeu!"),this.mettreAJourInterface()}},{key:"resetCarte",value:function(){for(var t=this,e=0;e<this.mapSize;e++){this.map[e]=[];for(var r=0;r<this.mapSize;r++)this.map[e][r]=new A(r,e)}this.map[this.joueur.y][this.joueur.x].estJoueur(this.joueur),this.map[this.joueur.y][this.joueur.x].addEventListener("click",(function(){return t.activerMouvement()})),this.monstresEnJeu.forEach((function(e){t.map[e.y][e.x].estMonstre(e),t.map[e.y][e.x].addEventListener("click",(function(){return t.afficherInfosEnnemi(e)}))}))}},{key:"creationMonstre",value:function(){var t,e,r=this.mapSize;do{t=Math.floor(Math.random()*r),e=Math.floor(Math.random()*r)}while(!this.map[e][t].estLibre());var n=Object.assign(new H,At.listeMonstres[Math.floor(Math.random()*Math.min(Math.floor(this.tour/3)+1,At.listeMonstres.length))]);n.x=t,n.y=e,n.resetStats(),this.monstresEnJeu.push(n),It.logMessageInfo("".concat(n.nom," apparaÃ®t en (").concat(n.x,", ").concat(n.y,")!")),this.resetCarte(),this.mettreAJourInterface()}},{key:"mettreAJourInterface",value:function(){var t=this;I.afficherCarte(),D.afficherStats(),Dt.afficherXpBar(),zt.afficherSorts(),At.listeSortsDebloquer.forEach((function(e){e.addEventListener("click",(function(){return t.afficherAttaque(e.sort)}))}))}},{key:"afficherInfosEnnemi",value:function(t){console.log(t),It.logMessageInfo("Nom: ".concat(t.nom," PV: ").concat(t.pv," Attaque: ").concat(t.attaque," Defense: ").concat(t.defense," PA : ").concat(t.pa))}},{key:"afficherDeplacement",value:function(){var t=this;this.map.forEach((function(e){e.forEach((function(e){t.joueur.estAPorteeDeplacement(e)&&e.estLibre()&&(e.afficherPorteeMouvement(),e.addEventListener("click",(function(){return t.deplacerJoueur(e.x,e.y)})))}))}))}},{key:"activerMouvement",value:function(){this.mouvJoueurActif=!this.mouvJoueurActif,this.mouvJoueurActif&&!1===this.desactiverInterface?this.afficherDeplacement():(this.resetCarte(),this.mettreAJourInterface())}},{key:"deplacerJoueur",value:function(t,e){var r=Math.abs(t-this.joueur.x)+Math.abs(e-this.joueur.y);!1===this.map[e][t].estLibre()?It.logMessageErreur("Vous ne pouvez pas vous dÃ©placer sur la case de l'ennemi."):r<=this.joueur.pm&&(It.logMessageInfo("Vous vous dÃ©placez en (".concat(t,", ").concat(e,")!")),this.joueur.deplacer(t,e),this.mouvJoueurActif=!1,this.resetCarte(),this.mettreAJourInterface())}},{key:"afficherAttaque",value:function(t){this.viseeSortActif=!this.viseeSortActif,this.resetCarte(),this.mettreAJourInterface(),!0===this.viseeSortActif&&!1===this.desactiverInterface?t.typeCiblage===S.CROIX?this.viseeSortCroix(t):t.typeCiblage===S.ZONE?this.viseeSortZone(t):t.typeCiblage===S.DIAGONALE&&this.viseeSortDiagonale(t):(this.resetCarte(),this.mettreAJourInterface())}},{key:"lancerSort",value:function(t,e,r){var n=this.map[r][e].contenu;null!=n&&t.lancerSort(n),this.viseeSortActif=!1,this.checkAction(),this.resetCarte(),this.mettreAJourInterface()}},{key:"viseeSortCroix",value:function(t){for(var e=this,r=function(r){for(var n=function(n){r!==e.joueur.x&&n!==e.joueur.y||t.estAPortee({x:r,y:n})&&(e.map[n][r].afficherPorteeSort(),e.map[n][r].addEventListener("click",(function(){return e.lancerSort(t,r,n)})))},o=0;o<e.mapSize;o++)n(o)},n=0;n<this.mapSize;n++)r(n)}},{key:"viseeSortZone",value:function(t){for(var e=this,r=function(r){for(var n=function(n){t.estAPortee({x:n,y:r})&&(e.map[r][n].afficherPorteeSort(),e.map[r][n].addEventListener("click",(function(){return e.lancerSort(t,n,r)})))},o=0;o<e.mapSize;o++)n(o)},n=0;n<this.mapSize;n++)r(n)}},{key:"viseeSortDiagonale",value:function(t){for(var e=this,r=this.joueur,n=function(n){e.checkCoordonnees(r.x+n,r.y+n)&&t.estAPortee({x:r.x+n,y:r.y+n})&&(e.map[r.y+n][r.x+n].afficherPorteeSort(),e.map[r.y+n][r.x+n].addEventListener("click",(function(){return e.lancerSort(t,r.x+n,r.y+n)}))),e.checkCoordonnees(r.x-n,r.y+n)&&t.estAPortee({x:r.x-n,y:r.y+n})&&(e.map[r.y+n][r.x-n].afficherPorteeSort(),e.map[r.y+n][r.x-n].addEventListener("click",(function(){return e.lancerSort(t,r.x-n,r.y+n)}))),e.checkCoordonnees(r.x+n,r.y-n)&&t.estAPortee({x:r.x+n,y:r.y-n})&&(e.map[r.y-n][r.x+n].afficherPorteeSort(),e.map[r.y-n][r.x+n].addEventListener("click",(function(){return e.lancerSort(t,r.x+n,r.y-n)}))),e.checkCoordonnees(r.x-n,r.y-n)&&t.estAPortee({x:r.x-n,y:r.y-n})&&(e.map[r.y-n][r.x-n].afficherPorteeSort(),e.map[r.y-n][r.x-n].addEventListener("click",(function(){return e.lancerSort(t,r.x-n,r.y-n)})))},o=1;o<this.mapSize;o++)n(o)}},{key:"checkCoordonnees",value:function(t,e){return t>=0&&t<this.mapSize&&e>=0&&e<this.mapSize}},{key:"checkAction",value:function(){var t=this;this.monstresEnJeu.forEach((function(e){e.estVivant()||(It.logMessageInfo("".concat(t.joueur.nom," a vaincu ").concat(e.nom,"!")),t.joueur.gagnerExperience(e.experienceDonnee))})),this.monstresEnJeu=this.monstresEnJeu.filter((function(t){return t.estVivant()})),0===this.monstresEnJeu.length&&this.creationMonstre(),this.mettreAJourInterface()}},{key:"finDuTour",value:(n=Kt(Xt().mark((function t(){return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.joueur.finDuTour(),this.desactiverInterface=!0,this.tour++,At.tour=this.tour,t.next=6,this.tourDuMonstre();case 6:this.tour%2==0&&this.creationMonstre(),this.viseeSortActif=!1,this.mouvJoueurActif=!1,this.desactiverInterface=!1;case 10:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"tourDuMonstre",value:function(){var t=this;this.monstresEnJeu.forEach(function(){var e=Kt(Xt().mark((function e(r){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.debutTour(),r.estVivant()){e.next=7;break}t.checkAction(),t.resetCarte(),t.mettreAJourInterface(),e.next=18;break;case 7:if(!r.jouerTour()){e.next=14;break}return t.resetCarte(),t.mettreAJourInterface(),e.next=12,t.wait(200);case 12:e.next=7;break;case 14:if(r.finDuTour(),t.joueur.estVivant()){e.next=18;break}return Ft.afficherGameOver(),e.abrupt("return");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.checkAction(),this.joueur.debutTour()}},{key:"wait",value:function(t){return new Promise((function(e){return setTimeout(e,t)}))}}],r&&Qt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),$t=new Wt;$t.initialiserGame(),document.getElementById("end-turn-btn").addEventListener("click",(function(){return $t.finDuTour()}))}();
//# sourceMappingURL=main.bundle.js.map